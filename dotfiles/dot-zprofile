# Homebrew (macOS only)
if [[ -f /opt/homebrew/bin/brew ]]; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
fi

# NVM - needed for GUI apps like VSCode to find Node.js
export NVM_DIR="$HOME/.nvm"

# Load NVM (macOS via Homebrew or standard installation)
if [[ -s "/opt/homebrew/opt/nvm/nvm.sh" ]]; then
  \. "/opt/homebrew/opt/nvm/nvm.sh"
elif [[ -s "$NVM_DIR/nvm.sh" ]]; then
  \. "$NVM_DIR/nvm.sh"
fi

# Set default Node.js version
if type nvm &>/dev/null; then
  nvm use --lts --silent 2>/dev/null

  # Make Node.js available to GUI apps like VSCode via launchctl (macOS only)
  if [[ "$(uname)" == "Darwin" ]]; then
    launchctl setenv PATH "/usr/local/bin:/opt/homebrew/bin:/usr/bin:/bin:/usr/sbin:/sbin" 2>/dev/null
  fi
fi
